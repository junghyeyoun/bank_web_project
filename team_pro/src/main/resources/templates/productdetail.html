<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
</head>

<body>
	<form name="frm" id="frm" action="">
		<h3>제품 상세보기</h3>
		<table>
			<tr>
				<td>product id : [[${data.productId}]]</td>
				<td>category id : [[${data.category}]]</td>
				<td>브랜드 : [[${data.brand}]]</td>
				<td>모델 : [[${data.model}]]</td>
				<td>가격 : [[${data.price}]] 원</td>
				<td>재고량 : [[${data.stockQuantity}]] 개</td>
				<td> <img th:src="@{upload/}+${data.pimage}" /> </td>
			</tr>
			<tr>
				<td><button>카트에 담기</button></td>
				<td><button>주문하기</button></td>
			<tr>
				<a th:href="@{/reviewinsert(productId=${data.productId})}">리뷰쓰기</a>
			</tr>
			</tr>
			<!-- 상품삭제, 상품수저으 상품이미지삭제, 상세이미지 삭제 (판매자에게만 보여주도록 함) -->
			<tr>
				<td><a
						th:href="@{/productupdate(productId=${data.productId},page=${page},pimage=${data.pimage},dimage=${data.dimage})}">상품
						수정</a></td>
				<td>
					<input type="button" value="상품삭제" id="btnDel" />
				</td>
			</tr>

			<tr>
				<td><a th:href="@{/pimagedelete(productId=${data.productId})}">상품이미지 삭제</a></td>
				<td><a th:href="@{/dimagedelete(productId=${data.productId})}">상세이미지 삭제</a></td>
			</tr>
		</table>

		<br>
		<img th:src="@{upload/}+${data.dimage}" />
		<input type="hidden" name="productId" value="${data.productId}" />
		<input type="hidden" name="page" value="${page}" />
	</form>
	
	<s:authorize access="isAuthenticated()">
		<div class="col-md-auto">
			<c:if test="${user.username eq vo.bUserId}">
				<!-- Button trigger modal -->
				<button type="button" class="btn btn-secondary" data-toggle="modal"
					data-target="#exampleModal">삭제</button>

				<!-- Modal -->
				<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
					aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="exampleModalLabel">게시물 삭제</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">게시물을 삭제하시겠습니까?</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-primary"
									onclick="clickDel(boardInfo)">삭제하기</button>
								<button type="button" class="btn btn-secondary" data-dismiss="modal">취소하기</button>
							</div>
						</div>
					</div>
				</div>
				<script>
					function clickDel(formName) {
						formName.action = "/board/contentDelAsk";
						formName.method = "post";
						formName.submit();
					}
				</script>
			</c:if>
		</div>
	</s:authorize>
</body>

</html>